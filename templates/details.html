<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Request Details - {{ req.name }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Font Awesome Free CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-light">
    <div class="container py-5">
        <div class="text-center mb-4">
            <img src="{{ url_for('static', filename='assets/media/bria-logo.jpg') }}" alt="Association Logo" height="200" width="400">
        </div>
        <div class="card shadow">
        <div class="card-header bg-primary text-white">
          <h4><i class="fa-solid fa-magnifying-glass"></i> Request Details</h4>
        </div>
        <div class="card p-4 shadow-sm">
            <h4>
                <i class="fa-solid fa-file-lines text-primary"></i>
                {{ req.request_type }} (ID: {{ req.id }})
            </h4>
            <p><strong><i class="fa-solid fa-user"></i> Name:</strong> {{ req.name }}</p>
            <p><strong><i class="fa-solid fa-envelope"></i> Email:</strong> {{ req.email }}</p>
            <p><strong><i class="fa-solid fa-link"></i> Page(s) Involved:</strong> {{ req.page or 'N/A' }}</p>
            <p><strong><i class="fa-solid fa-align-left"></i> Description:</strong></p>
            <p>{{ req.description }}</p>
            <p><strong><i class="fa-solid fa-bolt"></i> Urgency:</strong> {{ req.urgency }}</p>
            <p><strong><i class="fa-solid fa-clock"></i> Submitted At:</strong> {{ req.submitted_at.strftime('%Y-%m-%d %H:%M') }}</p>
            <p><strong><i class="fa-solid fa-flag"></i> Status:</strong>
                {% if req.completed %}
                    <span class="badge bg-success"><i class="fa-solid fa-check"></i> Done</span>
                {% else %}
                    <span class="badge bg-warning text-dark"><i class="fa-solid fa-hourglass-half"></i> Pending</span>
                {% endif %}
            </p>
            {% if req.filename %}
            <p><strong><i class="fa-solid fa-paperclip"></i> Attachment:</strong>
                <a href="{{ url_for('uploaded_file', filename=req.filename) }}" target="_blank">
                    {{ req.filename }} <i class="fa-solid fa-arrow-up-right-from-square"></i>
                </a>
            </p>
            <!-- Display image if the file is an image -->
            {% if req.filename.lower().endswith(('.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp')) %}
                <img src="{{ url_for('uploaded_file', filename=req.filename) }}" alt="Attachment Image" class="img-fluid mb-3" style="max-width:300px;">
            {% endif %}
            {% endif %}
            <a href="{{ url_for('list_requests') }}" class="btn btn-secondary mt-3">
                <i class="fa-solid fa-arrow-left"></i> Back to Admin List
            </a>
        </div>
    </div>
</body>
</html>