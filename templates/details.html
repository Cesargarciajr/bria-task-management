<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Request Details - {{ req.name }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">
    <div class="container py-5">
        <h2>Request Details</h2>
        <div class="card p-4 shadow-sm">
            <h4>{{ req.request_type }} (ID: {{ req.id }})</h4>
            <p><strong>Name:</strong> {{ req.name }}</p>
            <p><strong>Email:</strong> {{ req.email }}</p>
            <p><strong>Page(s) Involved:</strong> {{ req.page or 'N/A' }}</p>
            <p><strong>Description:</strong></p>
            <p>{{ req.description }}</p>
            <p><strong>Urgency:</strong> {{ req.urgency }}</p>
            <p><strong>Submitted At:</strong> {{ req.submitted_at.strftime('%Y-%m-%d %H:%M') }}</p>
            <p><strong>Status:</strong>
                {% if req.completed %}
                    <span class="badge bg-success">Done</span>
                {% else %}
                    <span class="badge bg-warning text-dark">Pending</span>
                {% endif %}
            </p>
            {% if req.filename %}
            <p><strong>Attachment:</strong>
                <a href="{{ url_for('uploaded_file', filename=req.filename) }}" target="_blank">
                    {{ req.filename }}
                </a>
            </p>
            <!-- Display image if the file is an image -->
            {% if req.filename.lower().endswith(('.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp')) %}
                <img src="{{ url_for('uploaded_file', filename=req.filename) }}" alt="Attachment Image" class="img-fluid mb-3" style="max-width:300px;">
            {% endif %}
            {% endif %}
            <a href="{{ url_for('list_requests') }}" class="btn btn-secondary mt-3">Back to Admin List</a>
        </div>
    </div>
</body>
</html>
